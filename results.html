<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Search Results - SuperFan Studios</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: "Inter", sans-serif; background: #111; color: #fff; }
    .video-card { flex: 1 1 calc(25% - 1rem); min-width: 240px; border-radius: .75rem; overflow: hidden; position: relative; margin: .5rem; transition: transform .18s ease; background: #111; }
    .video-card:hover { transform: translateY(-6px); }
    .video-card img { width: 100%; height: 160px; object-fit: cover; display:block; }
    .video-card p { position: absolute; left: 0; bottom: 0; width: 100%; padding: .5rem; background: linear-gradient(to top, rgba(0,0,0,.85), transparent); color: #f3f4f6; font-size: .85rem; z-index: 8; }
    .watch-btn { display:flex; align-items:center; justify-content:center; position:absolute; inset:0; background: rgba(79,70,229,.82); color:#fff; font-weight:600; text-decoration:none; opacity:0; transition:opacity .16s ease; }
    .video-card:hover .watch-btn { opacity:1; }
    .flex-container { display:flex; flex-wrap: wrap; justify-content: flex-start; }
  </style>
</head>
<body class="p-6">

  <h1 class="text-3xl font-bold mb-6">Search Results</h1>
  <div id="results-container" class="flex-container"></div>

  <script>
    const API_KEY = "AIzaSyD844TSTfYIu_Cx8iJfOISmzrJj9aZy0UA"; // Replace with your API key
    const params = new URLSearchParams(window.location.search);
    const query = params.get("search");

    async function fetchVideos(query) {
      const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&maxResults=20&key=${API_KEY}`;
      const res = await fetch(url);
      const data = await res.json();
      return data.items || [];
    }

    document.addEventListener("DOMContentLoaded", async () => {
      const container = document.getElementById("results-container");
      const videos = await fetchVideos(query);
      container.innerHTML = videos.map(v => `
        <div class="video-card">
          <img src="${v.snippet.thumbnails.medium.url}" alt="${v.snippet.title}" />
          <p>${v.snippet.title}</p>
          <a class="watch-btn" href="https://www.youtube.com/watch?v=${v.id.videoId}" target="_blank">Watch Now</a>
        </div>
      `).join("");
    });
  </script>

</body>
</html>
